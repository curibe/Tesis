import numpy as np
import os, sys
import commands as cm
from Jupiter import *
from Config import *
from ICond import *

#==============
# SHORCUTS
#==============
system=os.system
get=cm.getoutput
getdir=os.getcwd
chdir=os.chdir
Argv=sys.argv

#==============
# PATHS
#==============
#HOME=get("echo $HOME")
Principal=getdir()
InitDir=Principal+"/Cond_Iniciales/"
BinDir=Principal+"/BIN/"
RunDir=Principal+"/RUNDIR/"

cmd="ls -d "+RunDir+"* | wc -l"
Ndir=int(get(cmd))


#=================================
# READING OUPUT FILES
#=================================
'''
Here, The program read each output file (BODY7.pos), in order to find
the time in what the comet cross the Sphere Of Influence. 

'''
File = BODY7.pos
Fdump="Comet.dat"


for i in range(Ndir):

    dir=RunDir+"run%d/output/"
    chdir(dir)
    Nl=int(get("wc -l %s | gawk '{print $1}'"%File))
    system("tail -n %d %s > %s"%(Nl-4,File,Fdump))
    
    State = np.loadtxt(Fdump)
    
    for j in range(len(State)):
        R=State[j][7]
        
    


